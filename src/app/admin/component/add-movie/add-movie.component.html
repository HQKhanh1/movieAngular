<h1>Add Movie</h1>
<mat-dialog-content>
  <form class="dialog" [formGroup]="movieService.formMovie">
    <div class="dialog left">
      <!--      filed poster-->
      <div class="item">
        <mat-form-field appearance="fill">
          <mat-label>Poster</mat-label>
          <input matInput placeholder="Link poster" formControlName="poster">
          <mat-error *ngIf="movieService.formMovie.get('poster').errors?.required">
            Link poster is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="img-poster">
        <span *ngIf="movieService.formMovie.value.poster">
          <img src="{{movieService.formMovie.value.poster}}"
               alt="poster">
        </span>
      </div>
      <!--      filed link trailer-->
      <div class="item">
        <mat-form-field appearance="fill">
          <mat-label>Link Trailer</mat-label>
          <input matInput placeholder="Link trailer" formControlName="linkTrailer">
        </mat-form-field>
      </div>
      <!--      filed link movie-->
      <div class="item">
        <mat-form-field appearance="fill">
          <mat-label>Link Movie</mat-label>
          <input matInput placeholder="Link Movie" formControlName="linkMovie">
          <mat-error *ngIf="movieService.formMovie.get('linkMovie').errors?.required">
            Link movie is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="dialog right">
      <!--      filed Movie Duration-->
      <div class="item">
        <mat-hint style="color: black">Movie Duration</mat-hint>
      </div>
      <!--      filed time picker-->
      <div class="item time-pick">
        <mat-form-field class="time hours">
          <input
            type="number"
            matInput
            min="0"
            placeholder="hours"
            [(ngModel)]="hours"
            [ngModelOptions]="{ standalone: true }">
          <mat-error *ngIf="!hours">
            Hours is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <mat-form-field class="time minutes">
          <input
            type="number"
            matInput
            min="0"
            placeholder="minutes"
            [(ngModel)]="minutes"
            (change)="eventChangeMinutes(minutes)"
            [ngModelOptions]="{ standalone: true }">
          <mat-error *ngIf="!minutes">
            Minutes is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <mat-form-field class="time seconds">
          <input
            type="number"
            matInput
            min="0"
            placeholder="seconds"
            [(ngModel)]="second" (change)="eventChangeSecond(second)"
            [ngModelOptions]="{ standalone: true }">
          <mat-error *ngIf="!second">
            Second is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <mat-error *ngIf="checkDuration()">
          <strong>Invalid </strong>movie duration
        </mat-error>
      </div>
      <!--      filed Release Date-->
      <div class="item">
        <mat-form-field class="date-picker" appearance="fill">
          <mat-label>Release Date</mat-label>
          <input matInput [matDatepicker]="picker" [max]="maxDate" formControlName="releaseDate">
          <mat-hint>DD/MM/YYYY</mat-hint>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker color="primary"></mat-datepicker>
          <mat-error *ngIf="movieService.formMovie.get('releaseDate').errors?.required">
            Release Date is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <!--      filed Movie status-->
      <div class="item">
        <mat-form-field appearance="fill">
          <mat-label>Movie Status</mat-label>
          <mat-select [(value)]="movieService.formMovie.value.movieStatus">
            <mat-option *ngFor="let movie of movieStatus" [value]="movie.id">
              {{movie.name}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="movieService.formMovie.get('movieStatus').errors?.required">
            Movie's status is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <!--      filed Movie's name-->
      <div class="item">
        <mat-form-field appearance="fill">
          <mat-label>Movie's name</mat-label>
          <textarea matInput formControlName="title"></textarea>
          <mat-error *ngIf="movieService.formMovie.get('title').errors?.required">
            Movie's name is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="dialog center">
      <!--      filed Movie's details-->
      <div class="item">
        <mat-form-field appearance="fill">
          <mat-label>Movie's detail</mat-label>
          <textarea matInput formControlName="details"></textarea>
          <mat-error *ngIf="movieService.formMovie.get('details').errors?.required">
            Movie's detail is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <!--      filed Movie Genre-->
      <div class="item" style="display: table">
        <mat-form-field appearance="fill">
          <mat-label>Movie Genre</mat-label>
          <mat-select [formControl]="movieGenre" multiple>
            <mat-select-trigger>
              <mat-chip-list>
                <mat-chip
                  *ngFor="let id of movieGenre.value"
                  [removable]="true"
                  [value]="id" (removed)="removeGenre(id)">
                  {{genreId(id).name}}
                  <mat-icon matChipRemove>cancel</mat-icon>
                </mat-chip>
              </mat-chip-list>
            </mat-select-trigger>
            <mat-option *ngFor="let genre of genreList" [value]="genre.id">{{genre.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <button
          style="
          display: table-cell;
          vertical-align: top;
          margin-top: 10px" mat-button (click)="onCreateGenre()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <!--      filed Movie Cast-->
      <div class="item" style="display: table">
        <mat-form-field appearance="fill">
          <mat-label>Movie Cast</mat-label>
          <mat-select [formControl]="movieCast" multiple>
            <mat-select-trigger>
              <mat-chip-list>
                <mat-chip
                  *ngFor="let id of movieCast.value"
                  [removable]="true"
                  [value]="id" (removed)="removeCast(id)">
                  <mat-chip-avatar>
                    <img style="height: 100%; width: 100%" src="{{castId(id).avatar}}" alt="Cast avatar">
                  </mat-chip-avatar>
                  {{castId(id).name}}
                  <mat-icon matChipRemove>cancel</mat-icon>
                </mat-chip>
              </mat-chip-list>
            </mat-select-trigger>
            <mat-option *ngFor="let cast of castList" [value]="cast.id">
              <mat-chip-list>
                <mat-chip>
                  <mat-chip-avatar>
                    <img style="height: 100%; width: 100%" src="{{cast.avatar}}" alt="avatar">
                  </mat-chip-avatar>
                  {{cast.name}}
                </mat-chip>
              </mat-chip-list>
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button
          style="
          display: table-cell;
          vertical-align: top;
          margin-top: 10px" mat-button (click)="onCreateCast()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <!--      filed Movie Director-->
      <div class="item" style="display: table">
        <mat-form-field appearance="fill">
          <mat-label>Movie Director</mat-label>
          <mat-select [formControl]="movieDirector" multiple>
            <mat-select-trigger>
              <mat-chip-list>
                <mat-chip
                  *ngFor="let id of movieDirector.value"
                  [removable]="true"
                  [value]="id" (removed)="removeDirector(id)">
                  <mat-chip-avatar>
                    <img style="height: 100%; width: 100%" src="{{directorId(id).avatar}}" alt="Director avatar">
                  </mat-chip-avatar>
                  {{directorId(id).name}}
                  <mat-icon matChipRemove>cancel</mat-icon>
                </mat-chip>
              </mat-chip-list>
            </mat-select-trigger>
            <mat-option *ngFor="let director of directorList" [value]="director.id">
              <mat-chip-list>
                <mat-chip>
                  <mat-chip-avatar>
                    <img style="height: 100%; width: 100%" src="{{director.avatar}}" alt="avatar">
                  </mat-chip-avatar>
                  {{director.name}}
                </mat-chip>
              </mat-chip-list>
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button
          style="
          display: table-cell;
          vertical-align: top;
          margin-top: 10px" mat-button (click)="onCreateDirector()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </div>
  </form>
</mat-dialog-content>
<mat-dialog-actions>
  <div class="group-button">
    <button class="button-cast" mat-raised-button (click)="onNoClick()">
      <mat-icon>exit_to_app</mat-icon>
    </button>
    <button type="submit" (click)="saveMovie()"
            class="save-movie-btn" mat-raised-button>
      <mat-icon>save</mat-icon>
    </button>
  </div>
</mat-dialog-actions>
